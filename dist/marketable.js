(()=>{var __webpack_modules__={};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}__webpack_require__.m=__webpack_modules__;(()=>{__webpack_require__.f={};__webpack_require__.e=chunkId=>Promise.all(Object.keys(__webpack_require__.f).reduce(((promises,key)=>{__webpack_require__.f[key](chunkId,promises);return promises}),[]))})();(()=>{__webpack_require__.u=chunkId=>""+chunkId+".js"})();(()=>{__webpack_require__.g=function(){if(typeof globalThis==="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window==="object")return window}}()})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop)})();(()=>{var inProgress={};var dataWebpackPrefix="resources:";__webpack_require__.l=(url,done,key,chunkId)=>{if(inProgress[url]){inProgress[url].push(done);return}var script,needAttach;if(key!==undefined){var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var s=scripts[i];if(s.getAttribute("src")==url||s.getAttribute("data-webpack")==dataWebpackPrefix+key){script=s;break}}}if(!script){needAttach=true;script=document.createElement("script");script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.setAttribute("data-webpack",dataWebpackPrefix+key);script.src=url}inProgress[url]=[done];var onScriptComplete=(prev,event)=>{script.onerror=script.onload=null;clearTimeout(timeout);var doneFns=inProgress[url];delete inProgress[url];script.parentNode&&script.parentNode.removeChild(script);doneFns&&doneFns.forEach((fn=>fn(event)));if(prev)return prev(event)};var timeout=setTimeout(onScriptComplete.bind(null,undefined,{type:"timeout",target:script}),12e4);script.onerror=onScriptComplete.bind(null,script.onerror);script.onload=onScriptComplete.bind(null,script.onload);needAttach&&document.head.appendChild(script)}})();(()=>{var scriptUrl;if(__webpack_require__.g.importScripts)scriptUrl=__webpack_require__.g.location+"";var document=__webpack_require__.g.document;if(!scriptUrl&&document){if(document.currentScript)scriptUrl=document.currentScript.src;if(!scriptUrl){var scripts=document.getElementsByTagName("script");if(scripts.length){var i=scripts.length-1;while(i>-1&&!scriptUrl)scriptUrl=scripts[i--].src}}}if(!scriptUrl)throw new Error("Automatic publicPath is not supported in this browser");scriptUrl=scriptUrl.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/");__webpack_require__.p=scriptUrl})();(()=>{var installedChunks={390:0};__webpack_require__.f.j=(chunkId,promises)=>{var installedChunkData=__webpack_require__.o(installedChunks,chunkId)?installedChunks[chunkId]:undefined;if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{if(true){var promise=new Promise(((resolve,reject)=>installedChunkData=installedChunks[chunkId]=[resolve,reject]));promises.push(installedChunkData[2]=promise);var url=__webpack_require__.p+__webpack_require__.u(chunkId);var error=new Error;var loadingEnded=event=>{if(__webpack_require__.o(installedChunks,chunkId)){installedChunkData=installedChunks[chunkId];if(installedChunkData!==0)installedChunks[chunkId]=undefined;if(installedChunkData){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;installedChunkData[1](error)}}};__webpack_require__.l(url,loadingEnded,"chunk-"+chunkId,chunkId)}}}};var webpackJsonpCallback=(parentChunkLoadingFunction,data)=>{var[chunkIds,moreModules,runtime]=data;var moduleId,chunkId,i=0;if(chunkIds.some((id=>installedChunks[id]!==0))){for(moduleId in moreModules){if(__webpack_require__.o(moreModules,moduleId)){__webpack_require__.m[moduleId]=moreModules[moduleId]}}if(runtime)var result=runtime(__webpack_require__)}if(parentChunkLoadingFunction)parentChunkLoadingFunction(data);for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(__webpack_require__.o(installedChunks,chunkId)&&installedChunks[chunkId]){installedChunks[chunkId][0]()}installedChunks[chunkId]=0}};var chunkLoadingGlobal=self["webpackChunkresources"]=self["webpackChunkresources"]||[];chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null,0));chunkLoadingGlobal.push=webpackJsonpCallback.bind(null,chunkLoadingGlobal.push.bind(chunkLoadingGlobal))})();var __webpack_exports__={};let queryMarketable={worldName:"中国",timeScale:24};let itemTypes={};let oldSelected;let columns=[{field:"itemId",sortable:true,visible:false,title:"物品ID"},{field:"name",sortable:true,formatter:function iconFormatter(value,row,index,field){return formatIcon(row,value)},title:"物品名称"},{field:"quantity",sortable:true,visible:false,title:$("#timeScale option:selected").html().slice(2)+"售出数"},{field:"num",sortable:true,title:$("#timeScale option:selected").html().slice(2)+"交易次数"},{field:"numIndexCurrent",sortable:true,title:"次数排序"},{field:"numIndexChange",sortable:true,title:"排序较上次",formatter:function changeFormatter(value,row,index,field){return formatChange(row,value)}},{field:"quantityIndexCurrent",sortable:true,visible:false,title:"售出数排序"},{field:"quantityIndexChange",sortable:true,visible:false,title:"排序较上次",formatter:function changeFormatter(value,row,index,field){return formatChange(row,value)}},{field:"pricePerUnit",sortable:true,title:"均价"},{field:"itemTypeName",sortable:true,visible:false,title:"分类"},{field:"itemLevel",sortable:true,visible:false,title:"品级"},{field:"equipLevel",sortable:true,visible:false,title:"等级"}];function filterMarketable(){const $marketableTable=$("#marketableTable");const timeScale=$("#timeScale").val();queryMarketable={worldName:$("#worldName").val(),timeScale,max:$("#max").val(),min:$("#min").val(),itemTypes:$("#itemType").val()};initBySortType();if(timeScale>24){columns[2].title=timeScale/24+"天售出数";columns[3].title=timeScale/24+"天交易次数"}else{columns[2].title=timeScale+"小时售出数";columns[3].title=timeScale+"小时交易次数"}$marketableTable.bootstrapTable("refreshOptions",{columns});$marketableTable.bootstrapTable("refresh",{query:queryMarketable})}function formatChange(row,value){if(value===0)return"持平";else if(value>0)return"<h4 style='display: inline;color: #1e7e34'>↓</h4>&nbsp;"+value;else if(value<0)return"<h4 style='display: inline; color: #b94a48'>↑</h4>&nbsp;"+-value;else return"无此物品"}function initMarketableNum(){$("#marketableTable").bootstrapTable({url:"/ffbusiness/saleHistory/marketableData",search:true,searchAlign:"left",searchSelector:"#search",toolbar:"#marketableForm",sortName:"numIndexCurrent",sortOrder:"asc",columns,method:"post",queryParams:function(params){return queryMarketable},pageList:[20,100,200,500,1e3],pagination:"true",showJumpto:true,contentType:"application/json"})}function formatIcon(row,value){let url=window.location.protocol+"//"+window.location.host+"/icon/"+row.itemId+".png";return'<img src="'+url+'" decoding="async" width="32" height="32" alt="图标">&nbsp;&nbsp;'+value}function resetMarketable(){$("#marketableForm")[0].reset();let $itemType=$("#itemType");$itemType.selectpicker("val",[]);queryMarketable={worldName:"中国",timeScale:24};let $worldName=$("#worldName");$worldName.selectpicker("val","中国");let $timeScale=$("#timeScale");$timeScale.selectpicker("val",24);let $sortType=$("#sortType");$sortType.selectpicker("val","1");$sortType.selectpicker("refresh");$timeScale.selectpicker("refresh");$worldName.selectpicker("refresh");$itemType.selectpicker("refresh");$("#marketableTable").bootstrapTable("destroy");const timeScale=$timeScale.val();if(timeScale>24){columns[2].title=timeScale/24+"天售出数";columns[3].title=timeScale/24+"天交易次数"}else{columns[2].title=timeScale+"小时售出数";columns[3].title=timeScale+"小时交易次数"}initMarketableNum()}function reInitTable($sortType){let val=$sortType.val();let table=$("#marketableTable");if(val==="2"){table.bootstrapTable("showColumn","quantityIndexCurrent");table.bootstrapTable("showColumn","quantityIndexChange");table.bootstrapTable("showColumn","quantity");table.bootstrapTable("hideColumn","numIndexCurrent");table.bootstrapTable("hideColumn","num");table.bootstrapTable("hideColumn","numIndexChange")}else{table.bootstrapTable("showColumn","numIndexCurrent");table.bootstrapTable("showColumn","numIndexChange");table.bootstrapTable("showColumn","num");table.bootstrapTable("hideColumn","quantityIndexCurrent");table.bootstrapTable("hideColumn","quantityIndexChange");table.bootstrapTable("hideColumn","quantity")}}function initBySortType(){let $sortType=$("#sortType");reInitTable($sortType)}function openUpdateTimeTable(){$("#myModal").modal("show");$("#updateTimeTable").bootstrapTable({url:"/ffbusiness/saleHistory/marketableUpdateTime",columns:[{field:"scale",title:"统计周期",formatter:function(value,row,index,field){return $("#timeScale option[value="+value+"]").html().slice(2)}},{field:"between",title:"当前统计范围",formatter:function(value,row,index,field){return"开始:"+row.begin+"<br/>结束:"+row.end}},{field:"next",title:"下次更新"}],method:"post",contentType:"application/json"})}function closeUpdateTimeTable(){$("#myModal").modal("toggle")}$(document).ready((function(){$("select").selectpicker();let $sortType=$("#sortType");$sortType.change((function(){initBySortType()}));initMarketableNum();$.ajax({url:"/ffbusiness/itemType/all",async:true,method:"post",contentType:"application/json",success:__webpack_require__.e(730).then((function(){var __WEBPACK_AMD_REQUIRE_ARRAY__=[__webpack_require__(730)];(function(){handleType()}).apply(null,__WEBPACK_AMD_REQUIRE_ARRAY__)}))["catch"](__webpack_require__.oe)})}));$.ajax({url:"/ffbusiness/visitor/record",async:true,method:"post",contentType:"application/json"});function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i].trim();if(c.indexOf(name)===0)return c.substring(name.length,c.length)}return""}})();